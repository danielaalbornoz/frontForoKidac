<app-navbar></app-navbar>

<div class="animado">
    <div class="Anime">
        <br>
        <div class="container">
            <div class="row">
                <div class="col-sm-3">
                    <div class="etiqueta">
                        <div class="card-body">
                            <h5 class="card-title">ANIME</h5>
                        </div>
                    </div>
                </div>
                <div class="col-1"> </div>
                <div class="col-md-6">
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="assets/img/anime/anime1.gif" class="d-block w-100 h-100"
                                    alt="Kimetsu no Yaiba">
                            </div>
                            <div class="carousel-item">
                                <img src="assets/img/anime/anime2.jpg" class="d-block w-100 h-100" alt="Akame ga Kill">
                            </div>
                            <div class="carousel-item">
                                <img src="assets/img/anime/anime3.jpg" class="d-block w-100 h-100"
                                    alt="Shingeki No Kyojin ">
                            </div>
                            <div class="carousel-item">
                                <img src="assets/img/anime/anime4.jpg" class="d-block w-100 h-100"
                                    alt="Naruto Shippūden">
                            </div>
                            <div class="carousel-item">
                                <img src="assets/img/anime/anime5.jpg" class="d-block w-100 h-100"
                                    alt="Darling in the Franxx">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="comida" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
            <br>
            <!--boton crear foro-->
            <button *ngIf="logged" type="button" class="btn btn-light boton" data-toggle="modal" data-target="#staticBackdrop">
                Crear foro
            </button>
            <!--            CREAR FORO              -->
            <div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content createForo">
                        <div class="modal-header">
                            <svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-justify-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z" />
                            </svg>
                            <h5 class="modal-title" id="staticBackdropLabel">Crear nuevo Foro</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-row ">
                                    <div class="col">
                                        <label for="temaForo" class="nombre">Tema del foro</label>
                                        <input type="text" class="form-control" maxlength="100" [(ngModel)]="nombreTema" name="addTemas">
                                    </div>
                                    <div class="col">
                                        <br>
                                        <button type="button" class="btn btn-warning btn-sm agregar" (click)="addTema();">
                                            Agregar
                                        </button>
                                    </div>
                                    <div class="col">
                                        <label for="inputTema" class="getTema">Selecciona tema</label>
                                        <select id="obtenerTema" class="form-control" [(ngModel)]="idTemas" name="getTemas">
                                            <option selected>Seleccionar</option>
                                            <option *ngFor="let selectTema of temasList" value="{{selectTema.idTemas}}"> {{selectTema.nombreTema}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="col">
                                        <label for="inputDate" class="nombre">Categoría</label>
                                        <select id="selectCategory" class="form-control" [(ngModel)]="idCategoria" name="category">
                                            <option selected>Seleccionar</option>
                                            <option *ngFor="let cate of categoryList" value="{{cate.idCategoria}}">
                                                {{cate.categoria}}
                                            </option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="tituloForo" class="nombre">Título</label>
                                    <input type="text" class="form-control" maxlength="200" [(ngModel)]="titulo" name="titulo">
                                </div>
                                <div class="form-group">
                                    <label for="descripcionForo" class="nombre">Descripción de foro</label>
                                    <input type="text" class="form-control" maxlength="1000" [(ngModel)]="descripcion" name="descripcion">
                                </div>
                                <div class="form-group">
                                    <label for="contenidoForo" class="nombre">Contenido</label>
                                    <textarea class="form-control" id="contenidoForo" rows="3" maxlength="1000" [(ngModel)]="contenido" name="contenido"></textarea>
                                </div>

                                <div class="form-row">
                                                                    
                                    <div class="col">
                                        <label for="inputDate" class="nombre">Fecha de publicación</label>
                                        <input type="date" class="form-control" id="inputDate" [(ngModel)]="fechaForo" name="fechaForo">
                                    </div>
                                    <div class="col"></div>                                        
                                </div>
                            </form>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">
                                Close
                            </button>
                            <button type="button" class="btn btn-success" data-dismiss="modal" (click)="crearForo();">
                                <svg width="1.5em" height="1em" viewBox="0 0 16 16" class="bi bi-plus" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                                </svg>
                                Crear
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-------------------------------------------->

            <!--        MOSTRAR LISTA DE FOROS      -->
            <div class="card cartaForo">
                <div class="card-body">

                    <div class="card cartaForo" *ngFor="let forum of nuevoForo">
                        <div class="card-body">
                            <a style="color: black; float: left;" data-toggle="modal">
                                <h4> {{forum.titulo}}</h4> {{forum.descripcion}}
                            </a>
                            <div style="float: right;">
                                <button *ngIf="LogAdmin" type="button" class="btn btn-danger borrarBoton" (click)="borrarForo(forum?.idForo);">
                                    <svg width="0.85em" height="0.85em" viewBox="0 0 16 16" class="bi bi-trash-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-dark detalle" data-toggle="modal" data-target=".bd-example-modal-lg" (click)="getDetalleForo(forum.idForo);">
                            Detalle
                        </button>

                        <!--            MOSTRAR FORO CREADO (detalle)            -->
                        <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" id="exampleModalLabel">{{foro?.titulo}}</h4>                                        
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>                                        
                                    </div>
                                    <br>
                                    <form class="foro">
                                        <div class="form-group formulario">
                                            <label for="exampleFormControlInput1">{{foro?.contenido}}</label>
                                            <p class="user">Creador: {{foro?.userCreador}}</p>
                                        </div>
                                        <hr>

                                        <!--       COMENTARIO      -->
                                        <div class="card carta" *ngFor=" let coment of nuevoComent; foro as nuevoForo">
                                            <div class="card-body cartaCom">
                                                <h5 class="card-title">@{{coment.userCreador}}</h5>
                                                <div>
                                                    <div style="float: left;">
                                                        <p class="card-text p2">{{coment.comentario}}</p>
                                                    </div>
                                                    <div style="float: right;">
                                                        <button *ngIf="logged" type="button" class="btn btn-danger borrarBoton" (click)="borrarComt(coment.idComment, foro?.idForo);">
                                                            <svg width="0.85em" height="0.85em" viewBox="0 0 16 16" class="bi bi-trash-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                                <path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z" />
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>                                       
                                            </div>
                                        </div>
                                        <br>
                                        <p *ngIf="!logged" class="p1">Para comentar, inicie sesión.</p>

                                        <div *ngIf="logged" class="form-group">
                                            <label for="exampleFormControlTextarea1">Comentario</label>
                                            <textarea class="form-control" id="comentario" rows="3" [(ngModel)]="comentario" name="comentario" maxlength="1000"></textarea>
                                        </div>
                                    </form>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">
                                            Close
                                        </button>
                                        <button *ngIf="logged" type="button" class="btn btn-primary" (click)="addComent(foro?.idForo);">
                                            Comentar
                                        </button>
                                    </div>
                                    <!-------------------------------------------->
                                </div>
                            </div>
                        </div>
                        <!-------------------------------------------->
                    </div>
                </div>
            </div>
            <!-------------------------------------------->
            <br>
        </div>
    </div>
</div>